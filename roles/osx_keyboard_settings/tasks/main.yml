---
- name: Show hidden files in finder
  osx_defaults:
    domain=com.apple.finder
    key=AppleShowAllFiles
    type=bool
    value=true

- name: Set a faster key repeat rate
  osx_defaults: domain=NSGlobalDomain key=KeyRepeat type=int value=0

- name: Set a shorter delay until key repeat
  osx_defaults: domain=NSGlobalDomain key=InitialKeyRepeat type=int value=15

- name: Change dock settings
  osx_defaults:
    domain=com.apple.dock
    key={{ item.key }}
    type={{ item.type }}
    value={{ item.value }}
  with_items:
    - { key: 'orientation', type: 'string', value: 'right' }
    - { key: 'autohide', type: 'bool', value: 'true' }
  register: dock

- name: restart dock if changed
  shell: killall Dock
  when: dock.changed
